<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>robot_interfaces: robot_interfaces::RobotBackend&lt; Action, Observation &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">robot_interfaces
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classrobot__interfaces_1_1RobotBackend.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classrobot__interfaces_1_1RobotBackend-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">robot_interfaces::RobotBackend&lt; Action, Observation &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Communication link between <a class="el" href="classrobot__interfaces_1_1RobotDriver.html" title="Driver for interfacing the actual robot hardware or simulation. ">RobotDriver</a> and <a class="el" href="classrobot__interfaces_1_1RobotData.html" title="Contains all the input and output data of the robot. ">RobotData</a>.  
 <a href="classrobot__interfaces_1_1RobotBackend.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="robot__backend_8hpp_source.html">robot_backend.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7a63f21152c8ee5edf71fa049ce28159"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159">TerminationReason</a> : int { <br />
&#160;&#160;<a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159ad4415db0cd24010c5b54bd3b9410698c">NOT_TERMINATED</a> = 0, 
<a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159a388203a418e09025a0ed81e4f7a2d18e">SHUTDOWN_REQUESTED</a> = 1, 
<a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159a64b32e420c93a194e338caf6dc1a29bb">MAXIMUM_NUMBER_OF_ACTIONS_REACHED</a> = 2, 
<a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159a833c13e27f0c8c8375ebb1b8c2e82922">DRIVER_ERROR</a> = -1, 
<br />
&#160;&#160;<a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159afa216b0e9b0ca2c3b83c43b971bd9598">FIRST_ACTION_TIMEOUT</a> = -2, 
<a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159aa982eef894a39f839cf41baa4f242964">NEXT_ACTION_TIMEOUT</a> = -3
<br />
 }</td></tr>
<tr class="separator:a7a63f21152c8ee5edf71fa049ce28159"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af454a09b5d269ed32b0ae2d35abdb833"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#af454a09b5d269ed32b0ae2d35abdb833">RobotBackend</a> (std::shared_ptr&lt; <a class="el" href="classrobot__interfaces_1_1RobotDriver.html">RobotDriver</a>&lt; Action, Observation &gt;&gt; robot_driver, std::shared_ptr&lt; <a class="el" href="classrobot__interfaces_1_1RobotData.html">RobotData</a>&lt; Action, Observation &gt;&gt; robot_data, const bool real_time_mode=true, const double first_action_timeout=std::numeric_limits&lt; double &gt;::infinity(), const uint32_t max_number_of_actions=0)</td></tr>
<tr class="separator:af454a09b5d269ed32b0ae2d35abdb833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae354dfd960d4fd0d2f9242dcfb4a701f"><td class="memItemLeft" align="right" valign="top"><a id="ae354dfd960d4fd0d2f9242dcfb4a701f"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_max_action_repetitions</b> ()</td></tr>
<tr class="separator:ae354dfd960d4fd0d2f9242dcfb4a701f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad761d1e0ab7296a9632b9c4cc9c91db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#aad761d1e0ab7296a9632b9c4cc9c91db">set_max_action_repetitions</a> (const uint32_t &amp;max_action_repetitions)</td></tr>
<tr class="memdesc:aad761d1e0ab7296a9632b9c4cc9c91db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set how often an action is repeated if no new one is provided.  <a href="#aad761d1e0ab7296a9632b9c4cc9c91db">More...</a><br /></td></tr>
<tr class="separator:aad761d1e0ab7296a9632b9c4cc9c91db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4eb9f5362b79c0c21b824e3b639ae6"><td class="memItemLeft" align="right" valign="top"><a id="a7e4eb9f5362b79c0c21b824e3b639ae6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>initialize</b> ()</td></tr>
<tr class="separator:a7e4eb9f5362b79c0c21b824e3b639ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da1748227b56acf7b745aff64023715"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a3da1748227b56acf7b745aff64023715">request_shutdown</a> ()</td></tr>
<tr class="memdesc:a3da1748227b56acf7b745aff64023715"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request shutdown of the backend loop.  <a href="#a3da1748227b56acf7b745aff64023715">More...</a><br /></td></tr>
<tr class="separator:a3da1748227b56acf7b745aff64023715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf72ec0a08dfbcb72b6c701e0cf1ac89"><td class="memItemLeft" align="right" valign="top"><a id="acf72ec0a08dfbcb72b6c701e0cf1ac89"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#acf72ec0a08dfbcb72b6c701e0cf1ac89">wait_until_first_action</a> () const</td></tr>
<tr class="memdesc:acf72ec0a08dfbcb72b6c701e0cf1ac89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until the first desired action is received. <br /></td></tr>
<tr class="separator:acf72ec0a08dfbcb72b6c701e0cf1ac89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68040bd611a6df70815e70dad722d692"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a68040bd611a6df70815e70dad722d692">wait_until_terminated</a> () const</td></tr>
<tr class="memdesc:a68040bd611a6df70815e70dad722d692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until the backend loop terminates.  <a href="#a68040bd611a6df70815e70dad722d692">More...</a><br /></td></tr>
<tr class="separator:a68040bd611a6df70815e70dad722d692"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:acfbf64755fc1910ca26f441085c99225"><td class="memItemLeft" align="right" valign="top"><a id="acfbf64755fc1910ca26f441085c99225"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_shutdown_request</b> () const</td></tr>
<tr class="separator:acfbf64755fc1910ca26f441085c99225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc66183743f277c41614a44fcc47b1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7cc66183743f277c41614a44fcc47b1a">loop</a> ()</td></tr>
<tr class="memdesc:a7cc66183743f277c41614a44fcc47b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop.  <a href="#a7cc66183743f277c41614a44fcc47b1a">More...</a><br /></td></tr>
<tr class="separator:a7cc66183743f277c41614a44fcc47b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a44f21ab5414ea7742e34a3cf3dfe0650"><td class="memItemLeft" align="right" valign="top"><a id="a44f21ab5414ea7742e34a3cf3dfe0650"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>loop</b> (void *instance_pointer)</td></tr>
<tr class="separator:a44f21ab5414ea7742e34a3cf3dfe0650"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9c07b9b4a8c98b3f1b63d0754cbcb85b"><td class="memItemLeft" align="right" valign="top"><a id="a9c07b9b4a8c98b3f1b63d0754cbcb85b"></a>
std::shared_ptr&lt; <a class="el" href="classrobot__interfaces_1_1RobotDriver.html">RobotDriver</a>&lt; Action, Observation &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>robot_driver_</b></td></tr>
<tr class="separator:a9c07b9b4a8c98b3f1b63d0754cbcb85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb04e584d971d4d99a32ea8c5b0cd68"><td class="memItemLeft" align="right" valign="top"><a id="a4bb04e584d971d4d99a32ea8c5b0cd68"></a>
std::shared_ptr&lt; <a class="el" href="classrobot__interfaces_1_1RobotData.html">RobotData</a>&lt; Action, Observation &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>robot_data_</b></td></tr>
<tr class="separator:a4bb04e584d971d4d99a32ea8c5b0cd68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81610183c52c9fe2088304bbd3b6f83f"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a81610183c52c9fe2088304bbd3b6f83f">real_time_mode_</a></td></tr>
<tr class="memdesc:a81610183c52c9fe2088304bbd3b6f83f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/disable real time mode.  <a href="#a81610183c52c9fe2088304bbd3b6f83f">More...</a><br /></td></tr>
<tr class="separator:a81610183c52c9fe2088304bbd3b6f83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f111a9e0663eedefbaf55de36f7cac"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a56f111a9e0663eedefbaf55de36f7cac">first_action_timeout_</a></td></tr>
<tr class="memdesc:a56f111a9e0663eedefbaf55de36f7cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout for the first action to arrive.  <a href="#a56f111a9e0663eedefbaf55de36f7cac">More...</a><br /></td></tr>
<tr class="separator:a56f111a9e0663eedefbaf55de36f7cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cac555549bff96a32da042a97919d47"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7cac555549bff96a32da042a97919d47">max_number_of_actions_</a></td></tr>
<tr class="memdesc:a7cac555549bff96a32da042a97919d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of actions that are executed by the backend.  <a href="#a7cac555549bff96a32da042a97919d47">More...</a><br /></td></tr>
<tr class="separator:a7cac555549bff96a32da042a97919d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe24206dcf102b33f8ee472e287f485a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#abe24206dcf102b33f8ee472e287f485a">is_shutdown_requested_</a></td></tr>
<tr class="memdesc:abe24206dcf102b33f8ee472e287f485a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to true when shutdown is requested.  <a href="#abe24206dcf102b33f8ee472e287f485a">More...</a><br /></td></tr>
<tr class="separator:abe24206dcf102b33f8ee472e287f485a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e91800b352b7b52f22820775b1d5e99"><td class="memItemLeft" align="right" valign="top"><a id="a0e91800b352b7b52f22820775b1d5e99"></a>
std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a0e91800b352b7b52f22820775b1d5e99">loop_is_running_</a></td></tr>
<tr class="memdesc:a0e91800b352b7b52f22820775b1d5e99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if the background loop is still running. <br /></td></tr>
<tr class="separator:a0e91800b352b7b52f22820775b1d5e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40ecdc44212f79f96d63a84f7b8a6e8"><td class="memItemLeft" align="right" valign="top"><a id="ae40ecdc44212f79f96d63a84f7b8a6e8"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#ae40ecdc44212f79f96d63a84f7b8a6e8">max_action_repetitions_</a></td></tr>
<tr class="memdesc:ae40ecdc44212f79f96d63a84f7b8a6e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of times the previous action is repeated if no new one is provided. <br /></td></tr>
<tr class="separator:ae40ecdc44212f79f96d63a84f7b8a6e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c9b7f07651484d1677121f72832482"><td class="memItemLeft" align="right" valign="top"><a id="a69c9b7f07651484d1677121f72832482"></a>
real_time_tools::CheckpointTimer&lt; 6, false &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>timer_</b></td></tr>
<tr class="separator:a69c9b7f07651484d1677121f72832482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf4f2443b7f3000cece9b0851284717"><td class="memItemLeft" align="right" valign="top"><a id="afcf4f2443b7f3000cece9b0851284717"></a>
std::shared_ptr&lt; real_time_tools::RealTimeThread &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>thread_</b></td></tr>
<tr class="separator:afcf4f2443b7f3000cece9b0851284717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c975705e05ecd43a2b1885e1ed1d858"><td class="memItemLeft" align="right" valign="top"><a id="a2c975705e05ecd43a2b1885e1ed1d858"></a>
std::atomic&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>termination_reason_</b></td></tr>
<tr class="separator:a2c975705e05ecd43a2b1885e1ed1d858"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Action, typename Observation&gt;<br />
class robot_interfaces::RobotBackend&lt; Action, Observation &gt;</h3>

<p>Communication link between <a class="el" href="classrobot__interfaces_1_1RobotDriver.html" title="Driver for interfacing the actual robot hardware or simulation. ">RobotDriver</a> and <a class="el" href="classrobot__interfaces_1_1RobotData.html" title="Contains all the input and output data of the robot. ">RobotData</a>. </p>
<p>At each time-step, it gets the observation from the <a class="el" href="classrobot__interfaces_1_1RobotDriver.html" title="Driver for interfacing the actual robot hardware or simulation. ">RobotDriver</a> and writes it to <a class="el" href="classrobot__interfaces_1_1RobotData.html" title="Contains all the input and output data of the robot. ">RobotData</a>, and it takes the desired_action from <a class="el" href="classrobot__interfaces_1_1RobotData.html" title="Contains all the input and output data of the robot. ">RobotData</a> and applies it on the <a class="el" href="classrobot__interfaces_1_1RobotDriver.html" title="Driver for interfacing the actual robot hardware or simulation. ">RobotDriver</a>.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Action</td><td></td></tr>
    <tr><td class="paramname">Observation</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="demo_8cpp-example.html#_a0">demo.cpp</a>, and <a class="el" href="demo_multiprocess_backend_8cpp-example.html#_a7">demo_multiprocess_backend.cpp</a>.</dd>
</dl></div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a7a63f21152c8ee5edf71fa049ce28159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a63f21152c8ee5edf71fa049ce28159">&#9670;&nbsp;</a></span>TerminationReason</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159">robot_interfaces::RobotBackend::TerminationReason</a> : int</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a7a63f21152c8ee5edf71fa049ce28159ad4415db0cd24010c5b54bd3b9410698c"></a>NOT_TERMINATED&#160;</td><td class="fielddoc"><p>Backend is still running. </p>
</td></tr>
<tr><td class="fieldname"><a id="a7a63f21152c8ee5edf71fa049ce28159a388203a418e09025a0ed81e4f7a2d18e"></a>SHUTDOWN_REQUESTED&#160;</td><td class="fielddoc"><p>Shutdown requested for non-failure reason (e.g. by SIGINT). </p>
</td></tr>
<tr><td class="fieldname"><a id="a7a63f21152c8ee5edf71fa049ce28159a64b32e420c93a194e338caf6dc1a29bb"></a>MAXIMUM_NUMBER_OF_ACTIONS_REACHED&#160;</td><td class="fielddoc"><p>Maximum number of actions was reached. </p>
</td></tr>
<tr><td class="fieldname"><a id="a7a63f21152c8ee5edf71fa049ce28159a833c13e27f0c8c8375ebb1b8c2e82922"></a>DRIVER_ERROR&#160;</td><td class="fielddoc"><p>Some error in the driver. </p>
</td></tr>
<tr><td class="fieldname"><a id="a7a63f21152c8ee5edf71fa049ce28159afa216b0e9b0ca2c3b83c43b971bd9598"></a>FIRST_ACTION_TIMEOUT&#160;</td><td class="fielddoc"><p>First action timeout was triggered. </p>
</td></tr>
<tr><td class="fieldname"><a id="a7a63f21152c8ee5edf71fa049ce28159aa982eef894a39f839cf41baa4f242964"></a>NEXT_ACTION_TIMEOUT&#160;</td><td class="fielddoc"><p>Next action timeout was triggered. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af454a09b5d269ed32b0ae2d35abdb833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af454a09b5d269ed32b0ae2d35abdb833">&#9670;&nbsp;</a></span>RobotBackend()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::<a class="el" href="classrobot__interfaces_1_1RobotBackend.html">RobotBackend</a> </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classrobot__interfaces_1_1RobotDriver.html">RobotDriver</a>&lt; Action, Observation &gt;&gt;&#160;</td>
          <td class="paramname"><em>robot_driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classrobot__interfaces_1_1RobotData.html">RobotData</a>&lt; Action, Observation &gt;&gt;&#160;</td>
          <td class="paramname"><em>robot_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>real_time_mode</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>first_action_timeout</em> = <code>std::numeric_limits&lt;double&gt;::infinity()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>max_number_of_actions</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">robot_driver</td><td><a class="el" href="classDriver.html">Driver</a> instance for the actual robot. </td></tr>
    <tr><td class="paramname">robot_data</td><td>Data is send to/retrieved from here. </td></tr>
    <tr><td class="paramname">real_time_mode</td><td>Enable/disable real-time mode. In real-time mode, the backend will repeat previous actions if the new one is not provided in time or fail with an error if the allowed number of repetitions is exceeded. In non-real-time mode, it will simply block and wait until the action is provided. </td></tr>
    <tr><td class="paramname">first_action_timeout</td><td>See <a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a56f111a9e0663eedefbaf55de36f7cac" title="Timeout for the first action to arrive. ">RobotBackend::first_action_timeout_</a>. </td></tr>
    <tr><td class="paramname">max_number_of_actions</td><td>See <a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7cac555549bff96a32da042a97919d47" title="Maximum number of actions that are executed by the backend. ">RobotBackend::max_number_of_actions_</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7cc66183743f277c41614a44fcc47b1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cc66183743f277c41614a44fcc47b1a">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main loop. </p>
<p>Iterate over robot_data_.desired_action and apply these actions to the robot, and read the applied_action and the observation from the robot and append them to the corresponding timeseries in robot_data_. </p>

</div>
</div>
<a id="a3da1748227b56acf7b745aff64023715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3da1748227b56acf7b745aff64023715">&#9670;&nbsp;</a></span>request_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::request_shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request shutdown of the backend loop. </p>
<p>The loop may take some time to actually terminate after calling this function. Use <a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a68040bd611a6df70815e70dad722d692" title="Wait until the backend loop terminates. ">wait_until_terminated()</a> to ensure it has really terminated. </p>

</div>
</div>
<a id="aad761d1e0ab7296a9632b9c4cc9c91db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad761d1e0ab7296a9632b9c4cc9c91db">&#9670;&nbsp;</a></span>set_max_action_repetitions()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::set_max_action_repetitions </td>
          <td>(</td>
          <td class="paramtype">const uint32_t &amp;&#160;</td>
          <td class="paramname"><em>max_action_repetitions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set how often an action is repeated if no new one is provided. </p>
<p>If the next action is due to be executed but the user did not provide one yet (i.e. there is no new action in the robot data time series), the last action will be repeated by automatically adding it to the time series again.</p>
<p>Use this this method to specify how often the action shall be repeated (default is 0, i.e. no repetition at all). If this limit is exceeded, the robot will be shut down and the <a class="el" href="classrobot__interfaces_1_1RobotBackend.html" title="Communication link between RobotDriver and RobotData. ">RobotBackend</a> stops.</p>
<p><b>Note:</b> This is ignored in non-real-time mode.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_action_repetitions</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a68040bd611a6df70815e70dad722d692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68040bd611a6df70815e70dad722d692">&#9670;&nbsp;</a></span>wait_until_terminated()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::wait_until_terminated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait until the backend loop terminates. </p>
<dl class="section return"><dt>Returns</dt><dd>Termination code (see <a class="el" href="classrobot__interfaces_1_1RobotBackend.html#a7a63f21152c8ee5edf71fa049ce28159">TerminationReason</a>). </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a56f111a9e0663eedefbaf55de36f7cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56f111a9e0663eedefbaf55de36f7cac">&#9670;&nbsp;</a></span>first_action_timeout_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::first_action_timeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timeout for the first action to arrive. </p>
<p>Timeout for the time between starting the backend loop and receiving the first action from the user. If exceeded, the backend shuts down. Set to infinity to disable the timeout. </p>

</div>
</div>
<a id="abe24206dcf102b33f8ee472e287f485a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe24206dcf102b33f8ee472e287f485a">&#9670;&nbsp;</a></span>is_shutdown_requested_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::is_shutdown_requested_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set to true when shutdown is requested. </p>
<p>This is used to notify the background loop about requested shutdown, so it terminates itself. </p>

</div>
</div>
<a id="a7cac555549bff96a32da042a97919d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cac555549bff96a32da042a97919d47">&#9670;&nbsp;</a></span>max_number_of_actions_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::max_number_of_actions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum number of actions that are executed by the backend. </p>
<p>If set to a value greater than zero, the backend will automatically shut down after the specified number of actions is executed. </p>

</div>
</div>
<a id="a81610183c52c9fe2088304bbd3b6f83f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81610183c52c9fe2088304bbd3b6f83f">&#9670;&nbsp;</a></span>real_time_mode_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Action, typename Observation&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool <a class="el" href="classrobot__interfaces_1_1RobotBackend.html">robot_interfaces::RobotBackend</a>&lt; Action, Observation &gt;::real_time_mode_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable/disable real time mode. </p>
<p>If real time mode is enabled (true), the back end expects new actions to be provided in time by the user. If this does not happen, the last received action is repeated until the configured number of repetitions is exceeded in which case it stops with an error.</p>
<p>If real time mode is disabled (false), the back-end loop blocks and waits for the next action if it is not provided in time.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classrobot__interfaces_1_1RobotBackend.html#ae40ecdc44212f79f96d63a84f7b8a6e8" title="Number of times the previous action is repeated if no new one is provided. ">max_action_repetitions_</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/robot_interfaces/<a class="el" href="robot__backend_8hpp_source.html">robot_backend.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>robot_interfaces</b></li><li class="navelem"><a class="el" href="classrobot__interfaces_1_1RobotBackend.html">RobotBackend</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
